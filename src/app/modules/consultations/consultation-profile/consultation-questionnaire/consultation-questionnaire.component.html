<!-- *ngIf="showCreateResponse() && questionnaireExist()" -->
<div class="paper-effect  mt-4 m-0-sm">
    <p class="satisfactory-heading">
      {{'How satisfied are you with this Consultation' | translate}}
    </p>
    <p class="satisfactory-tip">
      {{'Choose an option to submit your feedback' | translate}}
    </p>
    <div class="options-block">
      <button 
        class="dis-satisfied-bg"
        [ngClass]="{'active': (showQuestions && responseFeedback === 'dissatisfied'), 'grey-bg': showQuestions}"
        (click)="setSatisfactoryRating('dissatisfied')">
        <span>
          <img src="../../../../../assets/images/dissatisfied.svg" />
          Dissatisfied
        </span>
      </button>
      <button 
        class="dis-satisfied-bg"
        [ngClass]="{'active': (showQuestions && responseFeedback === 'somewhat_dissatisfied'), 'grey-bg': showQuestions}"
        (click)="setSatisfactoryRating('somewhat_dissatisfied')">
        <span>
          <img src="../../../../../assets/images/somewhat_dissatisfied.svg" />
          Somewhat Dissatisfied
        </span>
      </button>
      <button 
        class="satisfied-bg"
        [ngClass]="{'active': (showQuestions && responseFeedback === 'somewhat_satisfied'), 'grey-bg': showQuestions}"
        (click)="setSatisfactoryRating('somewhat_satisfied')">
        <span>
          <img src="../../../../../assets/images/somewhat_satisfied.svg" />
          Somewhat Satisfied
        </span>
      </button>
      <button 
        class="satisfied-bg"
        [ngClass]="{'active': (showQuestions && responseFeedback === 'satisfied'), 'grey-bg': showQuestions}"
        (click)="setSatisfactoryRating('satisfied')">
        <span>
          <img src="../../../../../assets/images/satisfied.svg" />
          Satisfied
        </span>
      </button>
    </div>
    <p class="error-msg" *ngIf="showError && !responseFeedback">Please select a Satisfaction Rating to submit the response</p>
    <div [ngClass]="showQuestions ? 'hr-line': ''"></div>
    <div class="question-box" *ngIf="showQuestions">
      <form [formGroup]="questionnaireForm">
        <div class="questions-container">
          <div class="question-index" *ngFor="let question of profileData?.questions; let i = index">
              <div class="question">
                <p class="question-text">
                  <span class="question-text__number">{{i+1}}.</span>
                  {{question.questionText}}
                </p>
                <div class="answer" *ngIf="question.questionType === 'multiple_choice'">
                  <div class="option-box" *ngFor="let subQuestion of question.subQuestions">
                    <label>
                      <input type="radio" class="cm-radio" [formControlName]="question.id" [value]="subQuestion.id">
                      <span>{{subQuestion.questionText}}</span>
                    </label>
                  </div>
                </div>
                <div class="answer" [formGroupName]="question.id" *ngIf="question.questionType === 'checkbox'">
                  <label class="answer__tips">Choose as many as you like</label>
                  <div class="option-box" *ngFor="let subQuestion of question.subQuestions">
                    <label>
                      <input type="checkbox" class="cm-radio" [formControlName]="subQuestion.id" (click)="toggle(question.id, subQuestion.id)">
                      <span>{{subQuestion.questionText}}</span>
                    </label>
                  </div>
                </div>
                <div class="answer" [id]="'text-area-' + question.id" *ngIf="question.questionType === 'long_text'">
                  <div class="text-area">
                    <textarea (input)="responseText = $event.target.value" placeholder="Type your answer here" [formControlName]="question.id"></textarea>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="checkbox-area" *ngIf="responseText !== templateText">
            <div class="input-checbox" >
              <input class="cm-checkbox mr-2" type="checkbox" [(ngModel)]="responseVisibility" [ngModelOptions]="{standalone: true}"/> 
              <label class="m-0">{{'Make my response public' | translate}}</label>
              <span class="link">{{'What does this mean?' | translate}}</span>
            </div>
          </div>
          <div class="py-3">
            <button  class="btn-submit active" (click)='submitAnswer()' [tooltip]="showError ? 'Please fill all the answers to submit response.' : ''">
              <p class="m-0">
                SUBMIT RESPONSE
              </p>
              <span class="ml-2"><i class="fa fa-angle-right"></i></span>
            </button>
          </div>
      </form>
    </div>
  </div>