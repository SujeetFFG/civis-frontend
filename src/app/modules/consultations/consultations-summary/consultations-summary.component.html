<div class="summary-index">
  <div class="consultation-profile">
      <section class="consultation-profile__sidebar-section">
        <app-profile-card [profile]='profileData' [summaryData]="summaryData"></app-profile-card>
      </section>
      <section class="consultation-profile__main-section">
        <div class="paper-effect mb-4">
          <p class="heading">
            {{'Summary' | translate}}
            <span>{{profileData?.readingTime ? '(' + profileData?.readingTime + ' min)' : '' }}</span>
          </p>
          <div class="tabs-block">
            <p *ngFor="let round of responseRounds" 
              (click)="setActiveRound(round.roundNumber)"
              [ngClass]="{'active': (roundNumber === round?.roundNumber)}">
              {{'Round ' + round.roundNumber}}
            </p>
          </div>
          <div *ngIf="profileData?.page || profileData?.summaryHindi" class="mb-4">
            <app-page-content-renderer [page]="useSummaryHindi ? profileData?.summaryHindi : profileData?.page"></app-page-content-renderer>
          </div>
          <div *ngIf="satisfactionRatingDistribution" class="mb-4">
            <p class="text-18 text-16-sm m-0 bold-text">{{'Consultation satisfication' | translate}}
            <div class="satisfication-container my-4 m-0-sm">
                <!-- <p class="text-16 m-0 bold-text">{{'Consultation satisfication' | translate}}</p> -->
                <div class="d-flex mt-3 mb-3">
                    <div class="satisfication-response">
                        <img src="assets/images/dissatisfied.svg" />
                        <p class="text-16 m-0 bold-text pl-2">{{satisfactionRatingDistribution?.dissatisfied ? satisfactionRatingDistribution?.dissatisfied : '0'}}</p>
                    </div>
                    <div class="satisfication-response">
                        <img src="assets/images/somewhat_dissatisfied.svg" />
                        <p class="text-16 m-0 bold-text pl-2">{{satisfactionRatingDistribution?.somewhat_dissatisfied ? satisfactionRatingDistribution?.somewhat_dissatisfied : '0'}}</p>
                    </div>
                    <div class="satisfication-response">
                        <img src="assets/images/somewhat_satisfied.svg" />
                        <p class="text-16 m-0 bold-text pl-2">{{satisfactionRatingDistribution?.somewhat_satisfied ? satisfactionRatingDistribution?.somewhat_satisfied : '0'}}</p>
                    </div>
                    <div class="satisfication-response">
                        <img src="assets/images/satisfied.svg" />
                        <p class="text-16 m-0 bold-text pl-2">{{satisfactionRatingDistribution?.satisfied ? satisfactionRatingDistribution?.satisfied : '0'}}</p>
                    </div>
                </div>
            </div>
          </div>

        <div *ngIf="publicResponsesLength">
          <div class="d-flex justify-content-between align-items-center">
            <p class="text-18 text-16-sm m-0 bold-text">{{'Public responses' | translate}}
            </p>
            <p 
              class="what-resp-text" 
              tooltip="If you feel passionately about this Consultation, you can make your response public, 
              for others to use as a template. Your first name is shared with the Government if you make your response public.
              If you’re not sure what to write, you can choose other people’s responses to send as your own." 
              placement="left"
              container="body"
            >
            {{'What are public responses?' | translate}}
            </p>
          </div>

          <div class="paper-effect my-4 m-0-sm ">
            <ng-container *ngFor="let response of publicResponses">
              <div class="response-container" *ngIf="roundNumber === response?.node?.roundNumber">
                <div class="d-inline-flex align-items-center">
                    <img class="avatar avatar--42" 
                    appDefaultImage [type]="'user'"
                    [src]="'null'" />
                  <p class="regular-text bold-text m-0 ml-2">{{response?.node?.user?.firstName}}</p>
                </div>
                <p class="text-16" [innerHTML]="response.node?.responseText"></p>
                <div *ngIf="response?.node?.answers">
                  <app-response-answers [response]="response?.node" [roundNumber]="roundNumber"></app-response-answers>
                </div>
                <div class="vote-section">
                  <div class="vote-count">
                    <div>
                        <span><i class="fa fa-thumbs-up"></i></span>
                        <span>{{response.node?.upVoteCount ? response.node?.upVoteCount : '' }}</span>
                    </div>
                    <div>
                        <span class="ml-4"><i class="fa fa-thumbs-down"></i></span>
                        <span>{{ response.node?.downVoteCount ? response.node?.downVoteCount : ''}}</span>
                    </div>
                    <div>
                        <span class="ml-4 mr-2"><i class="fa fa-refresh"></i></span>
                        <span>{{response.node?.templatesCount ? response.node?.templatesCount : ''}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>  
        </div>

        <div *ngIf="annonymousResponsesLength">
          <div>
              <p class="text-18 text-16-sm m-0 bold-text">{{'Other responses' | translate}}
              </p>
          </div>
          
          <div class="paper-effect my-4 m-0-sm" *ngFor="let response of annonymousResponses">
            <ng-container>
              <div class="response-container" *ngIf="roundNumber === response?.node?.roundNumber">
                <div class="d-inline-flex align-items-center">
                  <div>
                    <img class="avatar avatar--42" 
                    appDefaultImage [type]="'user'"
                    [src]="'null'" />
                  </div>
                  <p class="regular-text bold-text m-0 ml-2">
                    {{'Citizen Leader [Name undisclosed]' | translate}}
                  </p>
                </div>
                <p class="text-16" [innerHTML]="response.node?.responseText"></p>
                <div *ngIf="response?.node?.answers">
                  <app-response-answers [response]="response?.node" [roundNumber]="roundNumber"></app-response-answers>
                </div>
              </div>
            </ng-container>
          </div>  
        </div>
        </div>

        <!-- <div class="paper-effect mb-4 inner-space" *ngIf="showKeywordGraph">
          <p class="heading">
            {{'Overview' | translate}}
          </p> 
          <div id="highchartContainer" style="width:100%; height:400px;"></div>
        </div> -->
      </section>
  </div>
</div>
<app-footer></app-footer>